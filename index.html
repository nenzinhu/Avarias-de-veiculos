<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Registro de Avarias AmigÃ¡vel</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; padding: 20px; text-align: center; color: #333; }
    .container { position: relative; display: inline-block; background: #fff; padding: 0; border: 1px solid #ddd; line-height: 0; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    .container img { max-width: 550px; height: auto; display: block; }
    .area { position: absolute; font-size: 24px; cursor: pointer; transform: translate(-50%, -50%); user-select: none; transition: 0.2s; }
    .area:hover { transform: translate(-50%, -50%) scale(1.3); }

    /* Estilo do Menu de OpÃ§Ãµes */
    #menu-avaria {
      display: none; position: absolute; background: white; border: 1px solid #ccc;
      padding: 10px; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      z-index: 1000; text-align: left; line-height: 1.5;
    }
    #menu-avaria button {
      display: block; width: 100%; padding: 8px; margin: 4px 0;
      border: none; border-radius: 4px; cursor: pointer; background: #f8f9fa;
      transition: 0.2s; font-size: 14px;
    }
    #menu-avaria button:hover { background: #007bff; color: white; }
    
    /* RelatÃ³rio */
    #quadro-relatorio {
      max-width: 550px; margin: 20px auto; background: white;
      padding: 15px; border-radius: 8px; border-left: 5px solid #007bff;
      text-align: left; min-height: 50px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);
    }
    h3 { margin-bottom: 10px; font-weight: 500; }
  </style>
</head>
<body>

<h2>O que aconteceu com o veÃ­culo?</h2>
<p>Clique na peÃ§a e selecione o tipo de dano.</p>

<div class="container" id="carro-container">
  <img src="carro-topo.png" alt="Carro">

  <div class="area" onclick="abrirMenu(event, 'Para-choque Dianteiro')" style="top: 4%; left: 50%;">ğŸ”´</div>
  <div class="area" onclick="abrirMenu(event, 'CapÃ´')" style="top: 15%; left: 50%;">ğŸ”´</div>
  <div class="area" onclick="abrirMenu(event, 'Para-brisa')" style="top: 28%; left: 50%;">ğŸŸ¦</div>
  <div class="area" onclick="abrirMenu(event, 'Teto')" style="top: 45%; left: 50%;">ğŸ </div>
  <div class="area" onclick="abrirMenu(event, 'Vidro Traseiro')" style="top: 65%; left: 50%;">ğŸŸ¦</div>
  <div class="area" onclick="abrirMenu(event, 'Tampa do Porta-Malas')" style="top: 78%; left: 50%;">ğŸ”´</div>
  <div class="area" onclick="abrirMenu(event, 'Para-choque Traseiro')" style="top: 88%; left: 50%;">ğŸ”´</div>

  <div class="area" onclick="abrirMenu(event, 'Porta Dianteira Esquerda')" style="top: 40%; left: 30%;">ğŸšª</div>
  <div class="area" onclick="abrirMenu(event, 'Porta Traseira Esquerda')" style="top: 55%; left: 30%;">ğŸšª</div>
  <div class="area" onclick="abrirMenu(event, 'Retrovisor Esquerdo')" style="top: 31%; left: 25%;">ğŸª</div>
  <div class="area" onclick="abrirMenu(event, 'Roda Dianteira Esquerda')" style="top: 20%; left: 28%;">ğŸ›</div>
  <div class="area" onclick="abrirMenu(event, 'Roda Traseira Esquerda')" style="top: 75%; left: 28%;">ğŸ›</div>

  <div class="area" onclick="abrirMenu(event, 'Porta Dianteira Direita')" style="top: 40%; left: 70%;">ğŸšª</div>
  <div class="area" onclick="abrirMenu(event, 'Porta Traseira Direita')" style="top: 55%; left: 70%;">ğŸšª</div>
  <div class="area" onclick="abrirMenu(event, 'Retrovisor Direito')" style="top: 31%; left: 75%;">ğŸª</div>
  <div class="area" onclick="abrirMenu(event, 'Roda Dianteira Direita')" style="top: 20%; left: 72%;">ğŸ›</div>
  <div class="area" onclick="abrirMenu(event, 'Roda Traseira Direita')" style="top: 75%; left: 72%;">ğŸ›</div>
</div>

<div id="menu-avaria">
  <strong id="nome-peca">PeÃ§a</strong>
  <button onclick="registrar('Amassado(a)')">ğŸ”¨ Amassado</button>
  <button onclick="registrar('Quebrado(a)')">âŒ Quebrado</button>
  <button onclick="registrar('Arranhado(a)')">âœï¸ Arranhado</button>
  <button onclick="fecharMenu()" style="background:#eee; margin-top:10px;">Cancelar</button>
</div>

<div id="quadro-relatorio">
  <h3>RelatÃ³rio de Danos:</h3>
  <div id="texto-relatorio">Nenhuma avaria selecionada ainda.</div>
  <button onclick="limparRelatorio()" style="margin-top:15px; cursor:pointer;">Limpar Tudo</button>
</div>

<script>
  let pecaAtual = "";
  const menu = document.getElementById('menu-avaria');
  const textoRelatorio = document.getElementById('texto-relatorio');
  let danos = [];

  function abrirMenu(e, nome) {
    pecaAtual = nome;
    document.getElementById('nome-peca').innerText = nome;
    menu.style.display = 'block';
    menu.style.left = e.pageX + 'px';
    menu.style.top = e.pageY + 'px';
  }

  function fecharMenu() {
    menu.style.display = 'none';
  }

  function registrar(tipo) {
    const item = `â€¢ ${pecaAtual} estÃ¡ ${tipo.toLowerCase()}.`;
    if (!danos.includes(item)) {
      danos.push(item);
      atualizarQuadro();
    }
    fecharMenu();
  }

  function atualizarQuadro() {
    if (danos.length === 0) {
      textoRelatorio.innerText = "Nenhuma avaria selecionada ainda.";
    } else {
      textoRelatorio.innerHTML = danos.join('<br>');
    }
  }

  function limparRelatorio() {
    danos = [];
    atualizarQuadro();
  }

  // Fechar menu se clicar fora
  window.onclick = function(event) {
    if (!event.target.matches('.area') && !menu.contains(event.target)) {
      fecharMenu();
    }
  }
</script>

</body>
</html>